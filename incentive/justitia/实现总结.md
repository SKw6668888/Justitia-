# Justitia åŠ¨æ€æ¿€åŠ±æœºåˆ¶å®ç°æ€»ç»“

## æœ¬æ¬¡ä¼šè¯æ–°å¢å†…å®¹æ¦‚è§ˆ

æœ¬æ¬¡ä¼šè¯ä¸­ï¼Œæˆ‘ä»¬ä¸º Justitia æ¿€åŠ±æœºåˆ¶åŒ…å®ç°äº†**ä¸‰ç§åŠ¨æ€è¡¥è´´ç®—æ³•**ï¼Œå¹¶å®Œå–„äº†æ•´ä¸ªç³»ç»Ÿæ¶æ„ã€‚

---

## ğŸ“‹ æ–°å¢åŠŸèƒ½åˆ—è¡¨

### 1. **åŠ¨æ€æŒ‡æ ‡æ”¯æŒ** (DynamicMetrics)

**ä½ç½®:** `incentive/justitia/justitia.go` (ç¬¬ 58-65 è¡Œ)

**æ–°å¢ç»“æ„:**
```go
type DynamicMetrics struct {
    QueueLengthA     int64     // Shard A çš„é˜Ÿåˆ—é•¿åº¦
    QueueLengthB     int64     // Shard B çš„é˜Ÿåˆ—é•¿åº¦
    AvgWaitTimeA     float64   // Shard A çš„å¹³å‡ç­‰å¾…æ—¶é—´ (æ¯«ç§’)
    AvgWaitTimeB     float64   // Shard B çš„å¹³å‡ç­‰å¾…æ—¶é—´ (æ¯«ç§’)
    CurrentInflation *big.Int  // å½“å‰ epoch å·²å‘æ”¾çš„æ€»è¡¥è´´
}
```

**ä½œç”¨:** ä¸ºåŠ¨æ€ç®—æ³•æä¾›å®æ—¶åŒºå—é“¾çŠ¶æ€ä¿¡æ¯

---

### 2. **PID æ§åˆ¶å™¨æœºåˆ¶** (SubsidyPID)

**æ ¸å¿ƒæ–‡ä»¶:**
- `incentive/justitia/justitia.go` - æ ¸å¿ƒå®ç°
- `incentive/justitia/PID_IMPLEMENTATION.md` - è¯¦ç»†æ–‡æ¡£
- `incentive/justitia/example_pid_usage.go` - ä½¿ç”¨ç¤ºä¾‹

**æ–°å¢å†…å®¹:**

#### æ•°æ®ç»“æ„
```go
// PID çŠ¶æ€ (ç¬¬ 67-72 è¡Œ)
type PIDState struct {
    Integral   float64   // ç§¯åˆ†é¡¹
    PrevError  float64   // ä¸Šæ¬¡è¯¯å·®
    LastUpdate time.Time // ä¸Šæ¬¡æ›´æ–°æ—¶é—´
}

// PID å‚æ•° (ç¬¬ 74-82 è¡Œ)
type PIDParams struct {
    Kp                float64 // æ¯”ä¾‹å¢ç›Š (é»˜è®¤: 1.5)
    Ki                float64 // ç§¯åˆ†å¢ç›Š (é»˜è®¤: 0.1)
    Kd                float64 // å¾®åˆ†å¢ç›Š (é»˜è®¤: 0.05)
    TargetUtilization float64 // ç›®æ ‡é˜Ÿåˆ—åˆ©ç”¨ç‡ (é»˜è®¤: 0.7)
    CapacityB         float64 // ç›®æ ‡åˆ†ç‰‡é˜Ÿåˆ—å®¹é‡
    MinSubsidy        float64 // æœ€å°è¡¥è´´å€æ•°
    MaxSubsidy        float64 // æœ€å¤§è¡¥è´´å€æ•°
}
```

#### ç®—æ³•é€»è¾‘
```
è¯¯å·® = å½“å‰åˆ©ç”¨ç‡ - ç›®æ ‡åˆ©ç”¨ç‡
è¾“å‡º = Kp * è¯¯å·® + Ki * ç§¯åˆ† + Kd * å¾®åˆ†
è¡¥è´´ = EB * (1 + è¾“å‡º)
```

**ç‰¹ç‚¹:**
- âœ… è‡ªåŠ¨è°ƒèŠ‚é˜Ÿåˆ—é•¿åº¦åˆ°ç›®æ ‡å€¼
- âœ… å“åº”å¿«é€Ÿï¼Œé€‚åˆå®æ—¶æ§åˆ¶
- âœ… é˜²ç§¯åˆ†é¥±å’Œä¿æŠ¤
- âœ… æ— éœ€ç¦»çº¿è®­ç»ƒ

---

### 3. **æ‹‰æ ¼æœ—æ—¥ä¼˜åŒ–æœºåˆ¶** (SubsidyLagrangian)

**æ ¸å¿ƒæ–‡ä»¶:**
- `incentive/justitia/justitia.go` - æ ¸å¿ƒå®ç°
- `incentive/justitia/LAGRANGIAN_IMPLEMENTATION.md` - è¯¦ç»†æ–‡æ¡£
- `incentive/justitia/example_lagrangian_usage.go` - ä½¿ç”¨ç¤ºä¾‹

**æ–°å¢å†…å®¹:**

#### æ•°æ®ç»“æ„
```go
// æ‹‰æ ¼æœ—æ—¥çŠ¶æ€ (ç¬¬ 85-91 è¡Œ)
type LagrangianState struct {
    Lambda         float64   // å½±å­ä»·æ ¼ (æ‹‰æ ¼æœ—æ—¥ä¹˜å­)
    TotalSubsidy   *big.Int  // å½“å‰ epoch æ€»è¡¥è´´
    LastUpdate     time.Time // ä¸Šæ¬¡æ›´æ–°æ—¶é—´
    EpochStartTime time.Time // epoch å¼€å§‹æ—¶é—´
}

// æ‹‰æ ¼æœ—æ—¥å‚æ•° (ç¬¬ 93-100 è¡Œ)
type LagrangianParams struct {
    Alpha         float64 // å­¦ä¹ ç‡ (é»˜è®¤: 0.01)
    WindowSize    float64 // é˜Ÿåˆ—å®¹é‡å‚è€ƒå€¼ (é»˜è®¤: 1000.0)
    MinLambda     float64 // æœ€å°å½±å­ä»·æ ¼ (é»˜è®¤: 1.0)
    MaxLambda     float64 // æœ€å¤§å½±å­ä»·æ ¼ (é»˜è®¤: 10.0)
    CongestionExp float64 // æ‹¥å¡å› å­æŒ‡æ•° (é»˜è®¤: 2.0)
}
```

#### ç®—æ³•é€»è¾‘
```
æ‹¥å¡å› å­ = (QueueLengthB / WindowSize)^2  (äºŒæ¬¡åå¥½)
è¡¥è´´ = (EB * æ‹¥å¡å› å­) / Lambda
Lambda æ›´æ–° = Lambda + Alpha * (æ€»è¡¥è´´ - é¢„ç®—é™åˆ¶)
```

**ç‰¹ç‚¹:**
- âœ… å¼ºåˆ¶æ‰§è¡Œå…¨å±€é¢„ç®—çº¦æŸ
- âœ… ç³»ç»Ÿçº§ä¼˜åŒ–
- âœ… å½±å­ä»·æ ¼è‡ªåŠ¨è°ƒèŠ‚
- âœ… ç†è®ºæœ€ä¼˜æ€§ä¿è¯

**å…³é”®æ–¹æ³•:**
- `UpdateShadowPrice()` - æ¯ä¸ªåŒºå—åæ›´æ–°å½±å­ä»·æ ¼
- `ResetEpoch()` - æ–° epoch å¼€å§‹æ—¶é‡ç½®
- `GetShadowPrice()` - è·å–å½“å‰å½±å­ä»·æ ¼

---

### 4. **å¼ºåŒ–å­¦ä¹ æœºåˆ¶** (SubsidyRL)

**æ ¸å¿ƒæ–‡ä»¶:**
- `incentive/justitia/justitia.go` - æ ¸å¿ƒå®ç°
- `incentive/justitia/RL_IMPLEMENTATION.md` - è¯¦ç»†æ–‡æ¡£
- `incentive/justitia/example_rl_usage.go` - ä½¿ç”¨ç¤ºä¾‹
- `incentive/justitia/example_policy.json` - ç¤ºä¾‹ç­–ç•¥æ–‡ä»¶

**æ–°å¢å†…å®¹:**

#### æ•°æ®ç»“æ„
```go
// RL çŠ¶æ€ (ç¬¬ 102-107 è¡Œ)
type RLState struct {
    BucketQueueLength int // ç¦»æ•£åŒ–é˜Ÿåˆ—çŠ¶æ€: 0=ç©º, 1=æ­£å¸¸, 2=ç¹å¿™, 3=æ»¡
    BucketInflation   int // ç¦»æ•£åŒ–é€šèƒ€çŠ¶æ€: 0=ä½, 1=é«˜
}

// RL å‚æ•° (ç¬¬ 109-116 è¡Œ)
type RLParams struct {
    QueueThresholds    []float64 // é˜Ÿåˆ—ç¦»æ•£åŒ–é˜ˆå€¼ [250, 500, 750]
    InflationThreshold float64   // é€šèƒ€é˜ˆå€¼ (é»˜è®¤: 0.7)
    DefaultBeta        float64   // é»˜è®¤è¡¥è´´å€æ•° (é»˜è®¤: 1.0)
    MinBeta            float64   // æœ€å°å€æ•° (é»˜è®¤: 0.0)
    MaxBeta            float64   // æœ€å¤§å€æ•° (é»˜è®¤: 3.0)
}
```

#### å¥–åŠ±å‡½æ•° (ç”¨äºç¦»çº¿è®­ç»ƒ)
```
r_t = Fairness_t - Penalty_t * Inflation_t

å…¶ä¸­:
  Fairness_t = -|QueueLength_A - QueueLength_B| / MaxQueueLength
  Penalty_t = Î»_penalty (ä¾‹å¦‚: 0.1)
  Inflation_t = CurrentInflation / MaxInflation
```

**è®­ç»ƒç›®æ ‡:**
1. å¹³è¡¡åˆ†ç‰‡é—´é˜Ÿåˆ—é•¿åº¦ (æœ€å¤§åŒ–å…¬å¹³æ€§)
2. éµå®ˆé€šèƒ€é¢„ç®— (æœ€å°åŒ–é€šèƒ€æƒ©ç½š)
3. åœ¨ååé‡å’Œæˆæœ¬é—´æƒè¡¡

#### ç®—æ³•é€»è¾‘
```
1. çŠ¶æ€ç¦»æ•£åŒ–: è¿ç»­æŒ‡æ ‡ â†’ ç¦»æ•£çŠ¶æ€ (8ä¸ªçŠ¶æ€)
2. Q-Table æŸ¥æ‰¾: çŠ¶æ€ â†’ Beta (è¡¥è´´å€æ•°)
3. è¡¥è´´è®¡ç®—: R_AB = EB * Beta
```

**ç‰¹ç‚¹:**
- âœ… ä»å†å²æ•°æ®å­¦ä¹ æœ€ä¼˜ç­–ç•¥
- âœ… å¤„ç†å¤æ‚å¤šç›®æ ‡æƒè¡¡
- âœ… å¯å‘å¼ç­–ç•¥å¼€ç®±å³ç”¨
- âœ… æ”¯æŒåŠ è½½è®­ç»ƒå¥½çš„ç­–ç•¥

**å…³é”®æ–¹æ³•:**
- `LoadPolicy()` - ä» JSON æ–‡ä»¶åŠ è½½è®­ç»ƒå¥½çš„ Q-Table
- `SavePolicy()` - ä¿å­˜å½“å‰ Q-Table åˆ°æ–‡ä»¶
- `InitializeDefaultPolicy()` - åˆå§‹åŒ–å¯å‘å¼ç­–ç•¥
- `GetQTableSize()` - è·å– Q-Table å¤§å°

---

### 5. **äº¤æ˜“æ± æŒ‡æ ‡è·å–**

**ä½ç½®:** `core/txpool_justitia.go` (ç¬¬ 359-396 è¡Œ)

**æ–°å¢æ–¹æ³•:**
```go
func (txpool *PriorityTxPool) GetMetrics() justitia.DynamicMetrics
```

**åŠŸèƒ½:**
- è¿”å›å½“å‰é˜Ÿåˆ—é•¿åº¦
- ä¼°ç®—å¹³å‡ç­‰å¾…æ—¶é—´
- ä¸ºåŠ¨æ€ç®—æ³•æä¾›å®æ—¶æ•°æ®

---

### 6. **çŠ¶æ€ç®¡ç†æœºåˆ¶**

**ä½ç½®:** `incentive/justitia/justitia.go`

**æ–°å¢ Mechanism ç»“æ„:**
```go
type Mechanism struct {
    config          *Config
    pidState        *PIDState          // PID çŠ¶æ€
    lagrangianState *LagrangianState   // æ‹‰æ ¼æœ—æ—¥çŠ¶æ€
    qTable          map[RLState]float64 // RL Q-Table
    stateLock       sync.Mutex         // çº¿ç¨‹å®‰å…¨é”
}
```

**ç‰¹ç‚¹:**
- âœ… çº¿ç¨‹å®‰å…¨ (æ‰€æœ‰æ–¹æ³•ä½¿ç”¨äº’æ–¥é”)
- âœ… çŠ¶æ€æŒä¹…åŒ– (è·¨è°ƒç”¨ç»´æŠ¤çŠ¶æ€)
- âœ… ç»Ÿä¸€æ¥å£ (æ‰€æœ‰æ¨¡å¼ä½¿ç”¨ç›¸åŒ API)

---

## ğŸ“š æ–‡æ¡£æ–‡ä»¶

### å®ç°æ–‡æ¡£
1. **PID_IMPLEMENTATION.md** - PID æ§åˆ¶å™¨è¯¦ç»†è¯´æ˜
   - ç®—æ³•åŸç†
   - å‚æ•°è°ƒä¼˜æŒ‡å—
   - è¡Œä¸ºåˆ†æ
   - ä½¿ç”¨ç¤ºä¾‹

2. **LAGRANGIAN_IMPLEMENTATION.md** - æ‹‰æ ¼æœ—æ—¥ä¼˜åŒ–è¯¦ç»†è¯´æ˜
   - ç†è®ºåŸºç¡€
   - å½±å­ä»·æ ¼æœºåˆ¶
   - Epoch ç®¡ç†
   - ä¸ PID å¯¹æ¯”

3. **RL_IMPLEMENTATION.md** - å¼ºåŒ–å­¦ä¹ è¯¦ç»†è¯´æ˜
   - çŠ¶æ€ç©ºé—´è®¾è®¡
   - å¥–åŠ±å‡½æ•°å®šä¹‰
   - è®­ç»ƒæµç¨‹
   - ç­–ç•¥éƒ¨ç½²

4. **INTEGRATION_GUIDE.md** - åŒºå—é“¾é›†æˆæŒ‡å—
   - é€æ­¥é›†æˆè¯´æ˜
   - ä»£ç ç¤ºä¾‹
   - æ€§èƒ½è€ƒè™‘
   - æ•…éšœæ’é™¤

5. **README.md** - åŒ…æ€»è§ˆæ–‡æ¡£
   - å¿«é€Ÿå¼€å§‹
   - API å‚è€ƒ
   - æ€§èƒ½æŒ‡æ ‡
   - å¯¹æ¯”çŸ©é˜µ

### ç¤ºä¾‹ä»£ç 
1. **example_pid_usage.go** - PID ä½¿ç”¨ç¤ºä¾‹
2. **example_lagrangian_usage.go** - æ‹‰æ ¼æœ—æ—¥ä½¿ç”¨ç¤ºä¾‹
3. **example_rl_usage.go** - RL ä½¿ç”¨ç¤ºä¾‹
4. **example_policy.json** - RL ç­–ç•¥æ–‡ä»¶ç¤ºä¾‹

---

## ğŸš€ å¦‚ä½•è¿è¡Œ

### æ–¹å¼ä¸€: è¿è¡Œç¤ºä¾‹å‡½æ•°

1. **è¿›å…¥é¡¹ç›®ç›®å½•:**
```bash
cd "c:\Users\admin\Desktop\Justitia æ‹“å±•å®éªŒ\try"
```

2. **åˆ›å»ºæµ‹è¯•æ–‡ä»¶ (test_justitia.go):**
```go
package main

import (
    "blockEmulator/incentive/justitia"
)

func main() {
    // æµ‹è¯• PID æœºåˆ¶
    println("=== PID ç¤ºä¾‹ ===")
    justitia.ExamplePIDUsage()
    
    // æµ‹è¯•æ‹‰æ ¼æœ—æ—¥æœºåˆ¶
    println("\n=== æ‹‰æ ¼æœ—æ—¥ç¤ºä¾‹ ===")
    justitia.ExampleLagrangianUsage()
    
    // æµ‹è¯• RL æœºåˆ¶
    println("\n=== RL ç¤ºä¾‹ ===")
    justitia.ExampleRLUsage()
}
```

3. **è¿è¡Œæµ‹è¯•:**
```bash
go run test_justitia.go
```

---

### æ–¹å¼äºŒ: åœ¨åŒºå—é“¾ä¸­é›†æˆ

#### 1. åˆå§‹åŒ–æœºåˆ¶

```go
// åœ¨åŒºå—é“¾åˆå§‹åŒ–æ—¶
import "blockEmulator/incentive/justitia"

// é€‰æ‹©ä¸€ç§æ¨¡å¼
config := &justitia.Config{
    Mode: justitia.SubsidyPID,  // æˆ– SubsidyLagrangian, SubsidyRL
    PIDParams: justitia.PIDParams{
        Kp: 1.5, Ki: 0.1, Kd: 0.05,
        TargetUtilization: 0.7,
        CapacityB: 1000.0,
        MinSubsidy: 0.0, MaxSubsidy: 5.0,
    },
}

mechanism := justitia.NewMechanism(config)
```

#### 2. å¤„ç†è·¨åˆ†ç‰‡äº¤æ˜“

```go
// å¤„ç†æ¯ç¬”è·¨åˆ†ç‰‡äº¤æ˜“æ—¶
func ProcessCrossShardTx(tx *Transaction) {
    // è·å–å¹³å‡è´¹ç”¨
    EA := GetAverageFee(shardA)
    EB := GetAverageFee(shardB)
    
    // è·å–å½“å‰æŒ‡æ ‡
    metrics := txpool.GetMetrics()
    
    // è®¡ç®—è¡¥è´´
    R := mechanism.CalculateRAB(EA, EB, &metrics)
    
    // Shapley å€¼åˆ†é…
    fAB := tx.FeeToProposer
    uA, uB := justitia.Split2(fAB, R, EA, EB)
    
    // å¥–åŠ±æè®®è€…
    RewardProposer(shardA, uA)
    RewardProposer(shardB, uB)
}
```

#### 3. æ¨¡å¼ç‰¹å®šæ“ä½œ

**PID æ¨¡å¼:** æ— éœ€é¢å¤–æ“ä½œ

**æ‹‰æ ¼æœ—æ—¥æ¨¡å¼:**
```go
// æ¯ä¸ªåŒºå—ç»“æŸæ—¶
func FinalizeBlock() {
    mechanism.UpdateShadowPrice(totalSubsidy, inflationLimit)
}

// æ–° epoch å¼€å§‹æ—¶
func StartNewEpoch() {
    mechanism.ResetEpoch()
    totalSubsidy = big.NewInt(0)
}
```

**RL æ¨¡å¼:**
```go
// (å¯é€‰) åŠ è½½è®­ç»ƒå¥½çš„ç­–ç•¥
err := mechanism.LoadPolicy("trained_policy.json")
if err != nil {
    log.Printf("ä½¿ç”¨é»˜è®¤å¯å‘å¼ç­–ç•¥: %v", err)
}
```

---

### æ–¹å¼ä¸‰: å•å…ƒæµ‹è¯•

åˆ›å»ºæµ‹è¯•æ–‡ä»¶ `incentive/justitia/justitia_test.go`:

```go
package justitia

import (
    "math/big"
    "testing"
)

func TestPIDMechanism(t *testing.T) {
    config := DefaultConfig()
    config.Mode = SubsidyPID
    mechanism := NewMechanism(config)
    
    EA := big.NewInt(1000000000000000)
    EB := big.NewInt(2000000000000000)
    
    metrics := &DynamicMetrics{
        QueueLengthA: 100,
        QueueLengthB: 800,
        AvgWaitTimeA: 100.0,
        AvgWaitTimeB: 400.0,
        CurrentInflation: big.NewInt(0),
    }
    
    R := mechanism.CalculateRAB(EA, EB, metrics)
    
    if R.Sign() < 0 {
        t.Error("è¡¥è´´ä¸åº”ä¸ºè´Ÿ")
    }
    
    t.Logf("PID è¡¥è´´: %s wei", R.String())
}

func TestLagrangianMechanism(t *testing.T) {
    config := DefaultConfig()
    config.Mode = SubsidyLagrangian
    mechanism := NewMechanism(config)
    
    // ... ç±»ä¼¼æµ‹è¯•
}

func TestRLMechanism(t *testing.T) {
    config := DefaultConfig()
    config.Mode = SubsidyRL
    mechanism := NewMechanism(config)
    
    // ... ç±»ä¼¼æµ‹è¯•
}
```

è¿è¡Œæµ‹è¯•:
```bash
cd incentive/justitia
go test -v
```

---

## ğŸ“Š ä¸‰ç§æ¨¡å¼å¯¹æ¯”

| ç‰¹æ€§ | PID | æ‹‰æ ¼æœ—æ—¥ | RL |
|------|-----|----------|-----|
| **è®­ç»ƒéœ€æ±‚** | æ—  | æ—  | éœ€è¦ (ç¦»çº¿) |
| **é¢„ç®—çº¦æŸ** | æ—  | å¼ºåˆ¶ | è½¯çº¦æŸ |
| **é€‚åº”æ€§** | ä¸­ | ä¸­ | é«˜ |
| **å¯è§£é‡Šæ€§** | é«˜ | é«˜ | ä½ |
| **å¤šç›®æ ‡** | å¦ | æ˜¯ | æ˜¯ |
| **è®¡ç®—æˆæœ¬** | ä½ | ä½ | ä½ |
| **éƒ¨ç½²å¤æ‚åº¦** | ä½ | ä¸­ | é«˜ |

---

## ğŸ¯ ä½¿ç”¨å»ºè®®

### é€‰æ‹© PID å½“:
- âœ… éœ€è¦ç®€å•ã€å¯è§£é‡Šçš„æ§åˆ¶
- âœ… ç›®æ ‡é˜Ÿåˆ—åˆ©ç”¨ç‡æ˜¯ä¸»è¦ç›®æ ‡
- âœ… ä¸éœ€è¦é¢„ç®—çº¦æŸ
- âœ… å¿«é€Ÿéƒ¨ç½²å¾ˆé‡è¦

### é€‰æ‹©æ‹‰æ ¼æœ—æ—¥å½“:
- âœ… å¿…é¡»å¼ºåˆ¶æ‰§è¡Œå…¨å±€é¢„ç®—
- âœ… éœ€è¦ç³»ç»Ÿçº§ä¼˜åŒ–
- âœ… ç»æµä¿è¯å¾ˆé‡è¦
- âœ… ç†è§£å½±å­ä»·æ ¼åŠ¨æ€

### é€‰æ‹© RL å½“:
- âœ… æœ‰å†å²æ•°æ®å¯ç”¨äºè®­ç»ƒ
- âœ… éœ€è¦å¤šç›®æ ‡ä¼˜åŒ–
- âœ… å¯ä»¥æŠ•å…¥ç¦»çº¿è®­ç»ƒ
- âœ… å¯æ¥å—é»‘ç›’å†³ç­–

---

## ğŸ”§ é…ç½®ç¤ºä¾‹

### ä¿å®ˆé…ç½® (ä½è¡¥è´´)
```go
config := &justitia.Config{
    Mode: justitia.SubsidyPID,
    PIDParams: justitia.PIDParams{
        Kp: 1.0, Ki: 0.05, Kd: 0.02,
        TargetUtilization: 0.5,  // ä½ç›®æ ‡
        MaxSubsidy: 2.0,          // é™åˆ¶è¡¥è´´
    },
}
```

### æ¿€è¿›é…ç½® (é«˜è¡¥è´´)
```go
config := &justitia.Config{
    Mode: justitia.SubsidyLagrangian,
    LagrangianParams: justitia.LagrangianParams{
        Alpha: 0.02,              // å¿«é€Ÿé€‚åº”
        CongestionExp: 3.0,       // ä¸‰æ¬¡åå¥½
        MaxLambda: 5.0,           // è¾ƒå°‘å‰Šå‡
    },
    MaxInflation: big.NewInt(10000000000000000000), // 10 ETH
}
```

### å¹³è¡¡é…ç½® (é»˜è®¤)
```go
config := justitia.DefaultConfig()
config.Mode = justitia.SubsidyRL
// ä½¿ç”¨å¯å‘å¼ Q-Tableï¼Œå¹³è¡¡ç­–ç•¥
```

---

## ğŸ“ˆ æ€§èƒ½æŒ‡æ ‡

### è®¡ç®—æˆæœ¬
- **CalculateRAB (PID):** ~10 æ¬¡æµ®ç‚¹è¿ç®—
- **CalculateRAB (æ‹‰æ ¼æœ—æ—¥):** ~5 æ¬¡æµ®ç‚¹è¿ç®— + pow()
- **CalculateRAB (RL):** Map æŸ¥æ‰¾ (O(1))

### å†…å­˜ä½¿ç”¨
- **PIDState:** ~40 å­—èŠ‚
- **LagrangianState:** ~56 å­—èŠ‚
- **Q-Table (RL):** ~128 å­—èŠ‚
- **æ€»è®¡:** < 300 å­—èŠ‚/æœºåˆ¶

---

## ğŸ› æ•…éšœæ’é™¤

### é—®é¢˜: è¡¥è´´è¿‡é«˜
**è§£å†³æ–¹æ¡ˆ:**
- PID: é™ä½ `Kp`ï¼Œæé«˜ `TargetUtilization`
- æ‹‰æ ¼æœ—æ—¥: é™ä½ `MaxInflation`ï¼Œæé«˜ `Alpha`
- RL: ç”¨æ›´é«˜é€šèƒ€æƒ©ç½šé‡æ–°è®­ç»ƒ

### é—®é¢˜: è¡¥è´´è¿‡ä½
**è§£å†³æ–¹æ¡ˆ:**
- PID: æé«˜ `Kp`, `MaxSubsidy`
- æ‹‰æ ¼æœ—æ—¥: æé«˜ `MaxInflation`ï¼Œé™ä½ `Alpha`
- RL: ç”¨æ›´ä½é€šèƒ€æƒ©ç½šé‡æ–°è®­ç»ƒ

### é—®é¢˜: è¡¥è´´éœ‡è¡
**è§£å†³æ–¹æ¡ˆ:**
- PID: é™ä½ `Kp`ï¼Œæé«˜ `Kd`
- æ‹‰æ ¼æœ—æ—¥: é™ä½ `Alpha`
- RL: æ£€æŸ¥çŠ¶æ€ç¦»æ•£åŒ–é˜ˆå€¼

---

## ğŸ“ åç»­å·¥ä½œ

1. **åœ¨çº¿å­¦ä¹ :** åŸºäºå®æ—¶åé¦ˆæ›´æ–° Q-Table
2. **å¤šåˆ†ç‰‡åè°ƒ:** è·¨å¤šä¸ªåˆ†ç‰‡å¯¹æ‰©å±•
3. **æ·±åº¦å¼ºåŒ–å­¦ä¹ :** ä½¿ç”¨ç¥ç»ç½‘ç»œå¤„ç†æ›´å¤§çŠ¶æ€ç©ºé—´
4. **è‡ªé€‚åº”è°ƒä¼˜:** è‡ªåŠ¨è°ƒæ•´ PID/æ‹‰æ ¼æœ—æ—¥å‚æ•°
5. **æ€§èƒ½åŸºå‡†æµ‹è¯•:** åœ¨çœŸå®å·¥ä½œè´Ÿè½½ä¸‹æ¯”è¾ƒä¸‰ç§æ¨¡å¼

---

## ğŸ“ è”ç³»æ–¹å¼

å¦‚æœ‰é—®é¢˜æˆ–éœ€è¦å¸®åŠ©ï¼Œè¯·æŸ¥çœ‹:
- è¯¦ç»†æ–‡æ¡£: `incentive/justitia/*.md`
- ç¤ºä¾‹ä»£ç : `incentive/justitia/example_*.go`
- ä¸» README: `incentive/justitia/README.md`

ç¥ä½¿ç”¨æ„‰å¿«ï¼ğŸ‰
