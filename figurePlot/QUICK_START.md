# Justitia å®éªŒæ•°æ®åˆ†æå¿«é€Ÿå…¥é—¨

## ğŸ¯ ç›®æ ‡

ç”Ÿæˆ7å¼ è®ºæ–‡å›¾è¡¨ï¼Œå¯¹æ¯”5ç§ä¸åŒè¡¥è´´æœºåˆ¶çš„æ€§èƒ½ã€‚

## ğŸ“‹ å‡†å¤‡å·¥ä½œ

### 1. å®‰è£…ä¾èµ–

```bash
cd figurePlot
pip install -r requirements.txt
```

### 2. æµ‹è¯•å·¥å…·

```bash
python test_tools.py
```

ç¡®ä¿æ‰€æœ‰æµ‹è¯•é€šè¿‡ã€‚

## ğŸ”¬ å®éªŒæµç¨‹

### æ­¥éª¤1: ç”Ÿæˆé…ç½®æ–‡ä»¶

```bash
python generate_configs.py
```

è¿™å°†ç”Ÿæˆ5ä¸ªé…ç½®æ–‡ä»¶ï¼š
- `paramsConfig_monoxide.json`
- `paramsConfig_R0.json`
- `paramsConfig_R_EB.json`
- `paramsConfig_R_EA_EB.json`
- `paramsConfig_R_1ETH.json`

### æ­¥éª¤2: è¿è¡Œ5æ¬¡å®éªŒ

å¯¹äºæ¯ä¸ªé…ç½®æ–‡ä»¶ï¼š

```bash
# 1. å¤åˆ¶é…ç½®æ–‡ä»¶åˆ°é¡¹ç›®æ ¹ç›®å½•
copy paramsConfig_monoxide.json ..\paramsConfig.json

# 2. è¿è¡Œå®éªŒ
cd ..
.\blockEmulator.exe

# 3. ç­‰å¾…å®éªŒå®Œæˆï¼ˆè§‚å¯Ÿç»ˆç«¯è¾“å‡ºï¼‰

# 4. é‡å‘½åç»“æœæ–‡ä»¶å¤¹
move expTest expTest_monoxide

# 5. è¿”å›figurePlotç›®å½•
cd figurePlot
```

é‡å¤ä»¥ä¸Šæ­¥éª¤5æ¬¡ï¼Œåˆ†åˆ«ä½¿ç”¨ä¸åŒçš„é…ç½®æ–‡ä»¶ï¼Œå¹¶é‡å‘½åä¸ºï¼š
- `expTest_monoxide`
- `expTest_R0`
- `expTest_R_EB`
- `expTest_R_EA_EB`
- `expTest_R_1ETH`

### æ­¥éª¤3: æ•°æ®åˆ†æä¸ç»˜å›¾

#### æ–¹æ³•A: ä¸€é”®è¿è¡Œï¼ˆæ¨èï¼‰

**Windows:**
```bash
run_analysis.bat
```

**Linux/Mac:**
```bash
chmod +x run_analysis.sh
./run_analysis.sh
```

#### æ–¹æ³•B: åˆ†æ­¥è¿è¡Œ

```bash
# 1. æ•°æ®åˆ†æ
python justitia_data_analyzer.py

# 2. ç”Ÿæˆå›¾è¡¨
python justitia_plot_all.py
```

## ğŸ“Š è¾“å‡ºç»“æœ

### æ•°æ®æ–‡ä»¶ (data/)

- `fig1_queueing_latency_boxplot.json` - ç®±çº¿å›¾æ•°æ®
- `fig2_latency_ratio_bar.json` - å»¶è¿Ÿæ¯”å€¼æ•°æ®
- `fig3_kde_distribution.json` - KDEåˆ†å¸ƒæ•°æ®
- `fig4_cdf.json` - CDFæ•°æ®
- `fig5_ctx_ratio.json` - CTXå æ¯”æ•°æ®
- `fig6_cumulative_subsidy.json` - ç´¯è®¡è¡¥è´´æ•°æ®
- `fig7_proposer_profit_cdf.json` - åˆ©æ¶¦åˆ†å¸ƒæ•°æ®
- `summary_report.json` - æ•°æ®æ‘˜è¦

### å›¾è¡¨æ–‡ä»¶ (figures/)

1. **fig1_ctx_latency_boxplot.png** - CTXæ’é˜Ÿå»¶è¿Ÿç®±çº¿å›¾
2. **fig2_latency_ratio_bar.png** - CTX/ITXå»¶è¿Ÿæ¯”å€¼æŸ±çŠ¶å›¾
3. **fig3_latency_kde.png** - CTXå»¶è¿ŸKDEåˆ†å¸ƒ
4. **fig4_latency_cdf.png** - CTXå»¶è¿ŸCDF
5. **fig5_ctx_ratio.png** - åŒºå—ä¸­CTXå æ¯”
6. **fig6_cumulative_subsidy.png** - ç´¯è®¡è¡¥è´´å‘è¡Œé‡
7. **fig7_proposer_profit_cdf.png** - æè®®è€…åˆ©æ¶¦åˆ†å¸ƒ

## ğŸ¨ å›¾è¡¨è¯´æ˜

### å›¾1: CTXæ’é˜Ÿå»¶è¿Ÿç®±çº¿å›¾
- **ç”¨é€”**: å±•ç¤ºä¸åŒæœºåˆ¶ä¸‹CTXå»¶è¿Ÿçš„åˆ†å¸ƒå’Œç¦»æ•£ç¨‹åº¦
- **é¢„æœŸ**: R=E(f_B)å’Œæ›´é«˜è¡¥è´´çš„æœºåˆ¶åº”æœ‰æ›´ä½çš„ä¸­ä½æ•°å»¶è¿Ÿ

### å›¾2: CTX/ITXå»¶è¿Ÿæ¯”å€¼
- **ç”¨é€”**: å¯¹æ¯”CTXç›¸å¯¹äºITXçš„å»¶è¿Ÿ
- **é¢„æœŸ**: æ¯”å€¼<1.0è¡¨ç¤ºCTXæ›´å¿«ï¼ˆJustitiaç›®æ ‡ï¼‰

### å›¾3: CTXå»¶è¿ŸKDEåˆ†å¸ƒ
- **ç”¨é€”**: å¹³æ»‘å±•ç¤ºå»¶è¿Ÿåˆ†å¸ƒçš„æ¦‚ç‡å¯†åº¦
- **é¢„æœŸ**: æ›´å¥½çš„æœºåˆ¶åº”æœ‰æ›´é›†ä¸­åœ¨ä½å»¶è¿ŸåŒºåŸŸçš„åˆ†å¸ƒ

### å›¾4: CTXå»¶è¿ŸCDF
- **ç”¨é€”**: æ˜¾ç¤ºå»¶è¿Ÿçš„ç´¯ç§¯åˆ†å¸ƒ
- **é¢„æœŸ**: æ›²çº¿è¶Šé™¡å³­è¶Šå¥½ï¼ˆæ›´å¤šäº¤æ˜“åœ¨çŸ­æ—¶é—´å†…ç¡®è®¤ï¼‰

### å›¾5: åŒºå—ä¸­CTXå æ¯”
- **ç”¨é€”**: å±•ç¤ºCTXåœ¨æ‰“åŒ…äº¤æ˜“ä¸­çš„ä¼˜å…ˆçº§
- **é¢„æœŸ**: æ›´å¥½çš„è¡¥è´´æœºåˆ¶åº”æœ‰æ›´é«˜çš„CTXå æ¯”

### å›¾6: ç´¯è®¡è¡¥è´´å‘è¡Œé‡
- **ç”¨é€”**: å±•ç¤ºè¡¥è´´æˆæœ¬éšæ—¶é—´çš„å¢é•¿
- **é¢„æœŸ**: å¯¹æ•°åæ ‡æ˜¾ç¤ºä¸åŒæœºåˆ¶çš„æˆæœ¬å·®å¼‚

### å›¾7: æè®®è€…åˆ©æ¶¦åˆ†å¸ƒ
- **ç”¨é€”**: éªŒè¯R=E(f_B)æœºåˆ¶ä¸‹çš„å…¬å¹³æ€§
- **é¢„æœŸ**: CTXå’ŒITXçš„åˆ©æ¶¦åˆ†å¸ƒåº”è¯¥æ¥è¿‘

## âš™ï¸ è‡ªå®šä¹‰é…ç½®

### ä¿®æ”¹å®éªŒå‚æ•°

ç¼–è¾‘ `generate_configs.py` ä¸­çš„ `base_config`ï¼š

```python
base_config = {
    "BlockSize": 1000,        # åŒºå—å¤§å°
    "InjectSpeed": 2000,      # äº¤æ˜“æ³¨å…¥é€Ÿåº¦
    "TotalDataSize": 250000,  # æ€»æ•°æ®é‡
    # ... å…¶ä»–å‚æ•°
}
```

### ä¿®æ”¹å›¾è¡¨æ ·å¼

ç¼–è¾‘ `justitia_plot_all.py` ä¸­çš„é…ç½®ï¼š

```python
# é¢œè‰²æ–¹æ¡ˆ
COLORS = {
    'Monoxide': '#E74C3C',
    # ...
}

# å›¾è¡¨å°ºå¯¸
fig, ax = plt.subplots(figsize=(10, 6))

# DPIè®¾ç½®
plt.rcParams['figure.dpi'] = 300
```

## ğŸ› å¸¸è§é—®é¢˜

### Q1: æ‰¾ä¸åˆ°å®éªŒæ•°æ®

**A:** ç¡®ä¿ï¼š
- å®éªŒæ–‡ä»¶å¤¹å‘½åæ­£ç¡®ï¼ˆexpTest_monoxideç­‰ï¼‰
- result/å­ç›®å½•å­˜åœ¨
- Justitia_Effectiveness.csvæ–‡ä»¶å­˜åœ¨

### Q2: å›¾è¡¨æ˜¾ç¤ºå¼‚å¸¸

**A:** æ£€æŸ¥ï¼š
- æ•°æ®æ˜¯å¦æœ‰æ•ˆï¼ˆä¸å…¨ä¸º0ï¼‰
- å®éªŒæ˜¯å¦è¿è¡Œè¶³å¤Ÿé•¿æ—¶é—´ï¼ˆå»ºè®®100+ epochsï¼‰
- Pythonç‰ˆæœ¬ï¼ˆå»ºè®®3.7+ï¼‰

### Q3: å†…å­˜ä¸è¶³

**A:** å‡å°‘ï¼š
- TotalDataSizeå‚æ•°
- æˆ–åˆ†æ‰¹å¤„ç†æ•°æ®

### Q4: ä¸­æ–‡ä¹±ç 

**A:** æ‰€æœ‰æ ‡ç­¾å·²ä½¿ç”¨è‹±æ–‡ï¼Œæ— éœ€æ‹…å¿ƒä¸­æ–‡æ˜¾ç¤ºé—®é¢˜

## ğŸ“ˆ å®éªŒå»ºè®®

### æœ€ä½³å®è·µ

1. **å®éªŒæ—¶é•¿**: æ¯æ¬¡å®éªŒè‡³å°‘100ä¸ªepoch
2. **å‚æ•°ä¸€è‡´**: é™¤è¡¥è´´é…ç½®å¤–ï¼Œå…¶ä»–å‚æ•°ä¿æŒä¸€è‡´
3. **å¤šæ¬¡è¿è¡Œ**: æ¯ç§é…ç½®è¿è¡Œ3æ¬¡å–å¹³å‡å€¼ï¼ˆå¯é€‰ï¼‰
4. **æ•°æ®å¤‡ä»½**: åŠæ—¶å¤‡ä»½å®éªŒç»“æœ

### å‚æ•°æ¨è

```json
{
  "BlockSize": 1000,
  "InjectSpeed": 2000,
  "TotalDataSize": 250000,
  "Block_Interval": 5000
}
```

## ğŸ“ è·å–å¸®åŠ©

1. æŸ¥çœ‹å®Œæ•´æ–‡æ¡£: `README_PLOTTING.md`
2. è¿è¡Œæµ‹è¯•å·¥å…·: `python test_tools.py`
3. æŸ¥çœ‹ç¤ºä¾‹æ•°æ®: `data/summary_report.json`

## âœ… æ£€æŸ¥æ¸…å•

å®éªŒå‰ï¼š
- [ ] å®‰è£…æ‰€æœ‰ä¾èµ–åŒ…
- [ ] è¿è¡Œæµ‹è¯•å·¥å…·éªŒè¯
- [ ] ç”Ÿæˆé…ç½®æ–‡ä»¶

å®éªŒä¸­ï¼š
- [ ] å®Œæˆ5æ¬¡å®éªŒ
- [ ] æ­£ç¡®é‡å‘½åç»“æœæ–‡ä»¶å¤¹
- [ ] éªŒè¯CSVæ–‡ä»¶å­˜åœ¨

å®éªŒåï¼š
- [ ] è¿è¡Œæ•°æ®åˆ†æå™¨
- [ ] ç”Ÿæˆæ‰€æœ‰å›¾è¡¨
- [ ] æ£€æŸ¥å›¾è¡¨è´¨é‡

---

**ç¥å®éªŒé¡ºåˆ©ï¼** ğŸ‰
